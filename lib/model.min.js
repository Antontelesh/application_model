(function(){var b,c,e,f;f=require("lodash"),c=require("./snake"),e=require("./valuefn"),b=function(){function b(b,c){var e,j,k,m,n;this.__attributes={},j=this.__getters=this.getGetters(),n=this.__setters=this.getSetters(),m=this.__parsers=this.getParsers(),e=this.__formatters=this.getFormatters(),k=f.difference(f.union(f.keys(j),f.keys(n)),f.keys(m)),f.each(m,function(b,c){return Object.defineProperty(this,c,{enumerable:!0,get:g.call(this,c,this.__attributes),set:i.call(this,c,this[b],this.__attributes)})},this),f.each(k,function(b){return Object.defineProperty(this,b,{enumerable:!0,get:this[j[b]],set:this[n[b]]})},this),f.assign(this,c,b)}var g,i;return g=function(b,c){return function(){return c[b]}},i=function(b,c,e){var f;return f=this,function(g){return e[b]=c.call(f,g)}},b.prototype.toPlainObject=function(){var c;return c=function(e){return e instanceof b?e.toPlainObject():f.isArray(e)?f.map(e,c):e?JSON.parse(JSON.stringify(e)):e},f.reduce(this.getOwnKeys(),function(b,e){return b[e]=c(this[e]),b},{},this)},b.prototype.format=function(){var c;return c=function(e){return e instanceof b?e.format():f.isArray(e)?f.map(e,c):e?JSON.parse(JSON.stringify(e)):e},f.reduce(this.getOwnKeys(),function(b,f){var g;return g=this[this.__formatters[f]]||e,b[f]=c(g.call(this,this[f])),b},{},this)},b.prototype.getOwnKeys=function(){return f.reject(f.keys(this),function(b){return 0===b.indexOf("__")})},b.prototype.getMutators=function(b){var e,g,i;return e=f.methods(this),i=new RegExp(b+"(\\w+)Attribute"),g=f.filter(e,function(b){return i.test(b)}),f.reduce(g,function(b,e){var f;return f=c(e.match(i)[1]),b[f]=e,b},{})},b.prototype.getGetters=function(){return this.getMutators("get")},b.prototype.getSetters=function(){return this.getMutators("set")},b.prototype.getParsers=function(){return this.getMutators("parse")},b.prototype.getFormatters=function(){return this.getMutators("format")},b}(),module.exports=b}).call(this);